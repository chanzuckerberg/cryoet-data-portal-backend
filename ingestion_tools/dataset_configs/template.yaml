# Future TODO: Create example_config.yaml file to show how to use this template.
annotations: OPTIONAL
- metadata: REQUIRED
    annotation_confidence: OPTIONAL
      ground_truth_used: OPTIONAL, STRING
      precision: OPTIONAL IF ground_truth_used ELSE null, FLOAT ([0, 100])
      recall: OPTIONAL IF ground_truth_used ELSE null, FLOAT ([0, 100])
    annotation_method: REQUIRED, STRING
    annotation_object: REQUIRED
      description: OPTIONAL, STRING
      id: REQUIRED, STRING (GOID)
      name: REQUIRED, STRING
      state: OPTIONAL, STRING
    annotation_publications: OPTIONAL, STRING
    annotation_software: OPTIONAL BUT RECOMMENDED, STRING
    authors: REQUIRED
    - name: REQUIRED, STRING
      email: OPTIONAL, STRING
      affiliation_name: OPTIONAL, STRING
      affiliation_address: OPTIONAL, STRING
      affiliation_identifier: OPTIONAL, STRING
      corresponding_author_status: OPTIONAL, BOOLEAN (DEFAULT FALSE)
      primary_author_status: OPTIONAL, BOOLEAN (DEFAULT FALSE)
      ORCID: OPTIONAL, STRING (ORCID)
    dates: REQUIRED
      deposition_date: REQUIRED, STRING, DATE FORMAT YYYY-MM-DD
      last_modified_date: REQUIRED, STRING, DATE FORMAT YYYY-MM-DD
      release_date: REQUIRED, STRING, DATE FORMAT YYYY-MM-DD
    ground_truth_status: REQUIRED, BOOLEAN (DEFAULT FALSE)
    is_curator_recommended: OPTIONAL, BOOLEAN (DEFAULT FALSE)
    method_type: REQUIRED, ENUM (manual, hybrid, automated)
    version: OPTIONAL, STRING
  sources: REQUIRED
  - binning: OPTIONAL, INTEGER (DEFAULT 1) (Point, OrientedPoint, InstanceSegmentation)
    columns: OPTIONAL, STRING (DEFAULT xyz) (Point)
    delimiter: OPTIONAL, STRING (DEFAULT ',') (Point)
    file_format: REQUIRED, STRING
    filter_value: OPTIONAL, STRING (OrientedPoint, InstanceSegmentation)
    glob_string: REQUIRED, STRING (REGEX)
    is_visualization_default: OPTIONAL, BOOLEAN (DEFAULT FALSE)
    mask_label: OPTIONAL, INTEGER (DEFAULT 1) (SemanticSegmentationMask)
    order: OPTIONAL, STRING (DEFAULT xyz) (OrientedPoint, InstanceSegmentation) # TODO: should this have a default too?
    shape: OPTIONAL, ENUM (InstanceSegmentation, OrientedPoint, Point, SegmentationMask, SemanticSegmentationMask)
dataset_keyphotos: OPTIONAL
- sources: REQUIRED
  - literal: REQUIRED
      value: REQUIRED
        snapshot: REQUIRED, STRING
        thumbnail: REQUIRED, STRING
datasets: REQUIRED
- metadata: REQUIRED
    authors: SEE annotations.authors
    cell_component: OPTIONAL
      id: OPTIONAL, STRING (GOID)
      name: REQUIRED, STRING
    cell_strain:
      id: OPTIONAL, STRING
      name: REQUIRED, STRING
    cell_type:
      id: OPTIONAL, STRING
      name: REQUIRED, STRING
    cross_references: OPTIONAL
      dataset_publications: OPTIONAL, STRING (DOIs)
      related_database_entries: OPTIONAL, STRING (EMPIAR / EMDB IDs)
    dataset_description: REQUIRED, STRING
    dataset_identifier: REQUIRED, INTEGER
    dataset_title: REQUIRED, STRING
    dates: SEE annotations.dates
    funding: OPTIONAL BUT RECOMMENDED
    - funding_agency_name: OPTIONAL BUT RECOMMENDED, STRING
      grant_id: OPTIONAL BUT RECOMMENDED, STRING
    grid_preparation: OPTIONAL BUT RECOMMENDED, STRING
    other_setup: OPTIONAL, STRING
    organism: OPTIONAL
      name: REQUIRED, STRING
      taxonomy_id: OPTIONAL, INTEGER
    sample_preparation: OPTIONAL BUT RECOMMENDED, STRING
    sample_type: REQUIRED, STRING
    tissue:
      id: OPTIONAL, STRING
      name: REQUIRED, STRING
  sources: REQUIRED (source_glob, source_multi_glob, destination_glob, literal)
  # only one finder type per list item, each can have an accompanying parent_filters (SEE runs.sources.parent_filters)
  - source_glob: OPTIONAL
      list_glob: REQUIRED, STRING (REGEX)
      match_regex: OPTIONAL, STRING (REGEX) (DEFAULT '.*')
      name_regex: OPTIONAL, STRING (REGEX) (DEFAULT '(.*)')
  - source_multi_glob:
      list_globs:
        - REQUIRED, STRING
    parent_filters: SEE runs.sources.parent_filters
  - destination_glob: OPTIONAL
      list_glob: REQUIRED, STRING (REGEX)
      match_regex: OPTIONAL, STRING (REGEX) (DEFAULT '.*')
      name_regex: OPTIONAL, STRING (REGEX) (DEFAULT '(.*)')
    parent_filters: SEE runs.sources.parent_filters
  - literal: OPTIONAL
      value:
      - REQUIRED, STRING
    parent_filters: SEE runs.sources.parent_filters
frames: OPTIONAL
- sources: SEE datasets.sources and runs.sources.parent_filters
gains: OPTIONAL
- sources: SEE datasets.sources and runs.sources.parent_filters
key_images: OPTIONAL
- sources: SEE dataset.sources and runs.sources.parent_filters
rawtilts: OPTIONAL
- sources: SEE datasets.sources and runs.sources.parent_filters
runs:
- sources: SEE datasets.sources (source_glob) and below
    # parent filters must be paired with a finder type (source_glob, source_multi_glob, ...)
    # can only exclude / include parent types (see IMPORTER_DEP_TREE)
    # in this case of being in the runs attribute, only dataset can be excluded / included
    # in dataset level, nothing can be excluded / included
    parent_filters: OPTIONAL
      exclude: OPTIONAL
        dataset: OPTIONAL
          - OPTIONAL, STRING (REGEX)
      include: OPTIONAL
        dataset: OPTIONAL
          - OPTIONAL, STRING (REGEX)
standardization_config: REQUIRED
  deposition_id: REQUIRED, INTEGER
  run_data_map_file: OPTIONAL, STRING
  run_to_frame_map_csv: OPTIONAL, STRING
  run_to_tomo_map_csv: OPTIONAL, STRING
  run_to_ts_map_csv: OPTIONAL, STRING
  source_prefix: REQUIRED, STRING
tiltseries: OPTIONAL
- metadata: REQUIRED
    acceleration_voltage: REQUIRED, INTEGER
    aligned_tiltseries_binning: OPTIONAL, INTEGER (Default 1)
    alignment_binning_factor: # DEPRECATED
    binning_from_frames: OPTIONAL, FLOAT
    camera: REQUIRED
      acquire_mode: OPTIONAL, STRING
      manufacturer: REQUIRED, STRING
      model: REQUIRED, STRING
    data_acquisition_software: REQUIRED, STRING
    is_aligned: REQUIRED, BOOLEAN (DEFAULT FALSE)
    microscope: REQUIRED
      additional_info: OPTIONAL, STRING
      manufacturer: REQUIRED, STRING
      model: REQUIRED, STRING
    microscope_optical_setup: REQUIRED
      energy_filter: REQUIRED, STRING
      image_corrector: OPTIONAL, STRING
      phase_plate: OPTIONAL, STRING
    pixel_spacing: REQUIRED, FLOAT
    related_empiar_entry: OPTIONAL, STRING
    spherical_aberration_constant: REQUIRED, FLOAT
    tilt_alignment_software: OPTIONAL, STRING
    tilt_axis: REQUIRED, FLOAT
    tilt_range: REQUIRED
      max: REQUIRED, FLOAT
      min: REQUIRED, FLOAT
    tilt_series_path: OPTIONAL, STRING # CURRENTLY NOT USED
    tilt_series_quality: REQUIRED, INTEGER (1-5)
    tilt_step: REQUIRED, FLOAT
    tilting_scheme: REQUIRED, STRING
    total_flux: REQUIRED, FLOAT
  sources: REQUIRED
  - source_glob: SEE dataset.sources.source_glob
tomograms: OPTIONAL
- metadata: REQUIRED
    affine_transformation_matrix: OPTIONAL 4x4 FLOAT MATRIX (DEFAULT 4x4 identity matrix)
      - - REQUIRED, FLOAT
        - ... (4 ELEMENTS)
      - ... (4 ELEMENTS)
    align_softwares: OPTIONAL, STRING # CURRENTLY NOT USED
    authors: SEE annotations.authors
    ctf_corrected: OPTIONAL BUT RECOMMENDED, BOOLEAN
    fiducial_alignment_status: REQUIRED, STRING (ENUM [FIDUCIAL, NON_FIDUCIAL])
    offset: REQUIRED
      x: REQUIRED, INTEGER
      y: REQUIRED, INTEGER
      z: REQUIRED, INTEGER
    size: OPTIONAL
      x: REQUIRED, INTEGER
      y: REQUIRED, INTEGER
      z: REQUIRED, INTEGER
    processing: REQUIRED, STRING (ENUM [denoised, filtered, raw])
    processing_software: OPTIONAL BUT RECOMMENDED, STRING
    reconstruction_method: REQUIRED, STRING
    reconstruction_software: REQUIRED, STRING
    tomogram_version: REQUIRED, FLOAT
    voxel_spacing: REQUIRED, FLOAT
  sources: SEE tiltseries.sources
voxel_spacings: REQUIRED
- sources: REQUIRED
  - destination_glob: see datasets.sources.destination_glob and runs.sources.parent_filters
  - source_glob: SEE datasets.sources.source_glob and runs.sources.parent_filters
  - source_multi_glob: SEE datasets.sources.source_multi_glob and runs.sources.parent_filters
  - literal: SEE datasets.sources.literal and runs.sources.parent_filters
  - tomogram_header: SEE runs.sources.parent_filters
      list_glob: REQUIRED, STRING (REGEX)
      match_regex: OPTIONAL, STRING (REGEX) (DEFAULT '.*')
      header_key: OPTIONAL, STRING (REGEX) (DEFAULT 'voxel_size')
